(function(e){function t(t){for(var i,a,c=t[0],l=t[1],s=t[2],d=0,h=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,c=1;c<n.length;c++){var l=n[c];0!==r[l]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},r={app:0},o=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/interactive-line/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i,r,o,a,c=n("2b0e"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("canvas",{ref:"canvas",on:{contextmenu:function(e){e.preventDefault()}}}),n("button",{on:{click:e.validation}},[e._v("Проверить на самопересечение")])])},s=[],u=n("3835"),d=n("2909"),h=(n("a4d3"),n("e01a"),n("d3b7"),n("99af"),n("a434"),n("22a2")),f=[[50,50],[300,300],[500,50]],p=Symbol(),v=Symbol(),g=Symbol(),y={name:"App",mounted:function(){this.initializeCanvas(),this.drawLines(),this.drawDisks()},beforeDestroy:function(){i.destroy(!0,!0),o=null,a=null,r=null,i=null},methods:{calculatePoints:function(e,t,n,i){var r=Math.atan((n-e)/(i-t)),o=5,a=o*Math.cos(r),c=o*Math.sin(r),l=[e+a,t-c,n+a,i-c,n-a,i+c,e-a,t+c];return l},changeLineStyleColor:function(e,t){var n=e.currentTarget;n&&n.geometry.graphicsData[0]&&(n.geometry.graphicsData[0].lineStyle.color=t,n.geometry.invalidate())},changeLineStyleWidth:function(e,t,n){var i=e.currentTarget;i&&i.geometry.graphicsData[0]&&(i.geometry.graphicsData[0].lineStyle.width=t,i.geometry.graphicsData[0].lineStyle.native=n,i.geometry.invalidate())},changeFillStyleColor:function(e,t){var n=e.currentTarget;n&&n.geometry.graphicsData[0]&&(n.geometry.graphicsData[0].fillStyle.color=t,n.geometry.invalidate())},checkSelfLineIntersection:function(){for(var e=f.length-1,t=1;t<=e;t++)for(var n=t+2;n<=e;n++){var i=[].concat(Object(d["a"])(f[t-1]),Object(d["a"])(f[t])),r=[].concat(Object(d["a"])(f[n-1]),Object(d["a"])(f[n])),o=this.isSegmentsIntersect(i,r);if(o)return!0}return!1},isSegmentsIntersect:function(e,t){var n=function(e,t,n,i){return e*i-t*n},i=Object(u["a"])(e,4),r=i[0],o=i[1],a=i[2],c=i[3],l=Object(u["a"])(t,4),s=l[0],d=l[1],h=l[2],f=l[3],p=n(a-r,c-o,s-r,d-o),v=n(a-r,c-o,h-r,f-o),g=n(h-s,f-d,r-s,o-d),y=n(h-s,f-d,a-s,c-d);return p*v<0&&g*y<0},drawDisk:function(e,t,n){var i=this,r=this,o=function(e){0===e.data.originalEvent.button&&(this[p]=e.data,this[v]=!0)},a=function(){this[p]=null,this[v]=!1},c=function(){if(this[v]){var e=this[p].getLocalPosition(this.parent),t=e.x,i=e.y;this.x=t,this.y=i,f[n][0]=t,f[n][1]=i,r.redrawLines()}},l=function(){var e=this[g];e>0&&e<f.length-1&&(f.splice(e,1),r.redrawLinesAndDisk())},s=new h["c"];return s[g]=n,s.buttonMode=!0,s.interactive=!0,s.x=e,s.y=t,s.beginFill(65280).drawCircle(0,0,10).endFill().on("mouseover",(function(e){i.changeFillStyleColor(e,65280)})).on("mouseout",(function(e){i.changeFillStyleColor(e,6749952)})).on("mousedown",o).on("mouseup",a).on("mouseupoutside",a).on("mousemove",c).on("rightclick",l),s},drawDisks:function(){for(var e=0;e<f.length;e++){var t=this.drawDisk.apply(this,Object(d["a"])(f[e]).concat([e]));a.addChild(t)}},drawLine:function(e,t,n,i,r){var o=this,a=this,c=this.calculatePoints(e,t,n,i),l=function(e){if(0===e.data.originalEvent.button){var t=e.data.getLocalPosition(this.parent),n=t.x,i=t.y;f.splice(this[g],0,[n,i]),a.redrawLinesAndDisk()}},s=new h["c"];return s[g]=r,s.buttonMode=!0,s.hitArea=new h["d"](c),s.interactive=!0,s.lineStyle(1,16711680,1,.5,!0).moveTo(e,t).lineTo(n,i).on("click",l).on("mouseover",(function(e){o.changeLineStyleColor(e,16744272),o.changeLineStyleWidth(e,10,!1)})).on("mouseout",(function(e){o.changeLineStyleColor(e,16711680),o.changeLineStyleWidth(e,1,!0)})),s},drawLines:function(){for(var e=1;e<f.length;e++){var t=this.drawLine.apply(this,Object(d["a"])(f[e-1]).concat(Object(d["a"])(f[e]),[e]));o.addChild(t)}},initializeCanvas:function(){i=new h["a"]({view:this.$refs.canvas,width:window.innerWidth,height:window.innerHeight,antialias:!0,autoDensity:!0,backgroundColor:16185078,resolution:window.devicePixelRatio||1,powerPreference:"high-performance"}),r=new h["b"],o=new h["b"],a=new h["b"],r.addChild(o),r.addChild(a),i.stage.addChild(r)},redrawDisk:function(){a.removeChildren(),this.drawDisks()},redrawLines:function(){o.removeChildren(),this.drawLines()},redrawLinesAndDisk:function(){this.redrawLines(),this.redrawDisk()},validation:function(){var e,t=!this.checkSelfLineIntersection();e=t?"Линия не имеет самопересечений!":"Линия имеет самопересечения!",alert(e)}}},w=y,b=(n("034f"),n("2877")),m=Object(b["a"])(w,l,s,!1,null,null,null),S=m.exports;c["a"].config.productionTip=!1,new c["a"]({render:function(e){return e(S)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.2f630db3.js.map